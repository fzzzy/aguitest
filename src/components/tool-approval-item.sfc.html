<template>
  <style>
    :host {
      display: block;
    }
    .wrapper {
      padding: 12px;
      margin: 8px 0;
      background: white;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }
    :host(.approved) .wrapper {
      background: #e8f5e9;
      border-color: #4caf50;
    }
    :host(.rejected) .wrapper {
      background: #ffebee;
      border-color: #f44336;
    }
    .tool-name {
      font-weight: 600;
      color: #e65100;
      margin-bottom: 4px;
    }
    .args {
      color: #666;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 12px;
      margin-bottom: 8px;
    }
    .buttons {
      display: flex;
      gap: 8px;
    }
    button {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .approve {
      background: #4caf50;
      color: white;
    }
    .approve:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
    }
    .reject {
      background: #f44336;
      color: white;
    }
    .reject:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
  <div class="wrapper">
    <div class="tool-name"></div>
    <div class="args"></div>
    <div class="buttons">
      <button class="approve">Approve</button>
      <button class="reject">Reject</button>
    </div>
  </div>
</template>
<script>
export default class extends HTMLElement {
  connectedCallback() {
    this.attachShadow({ mode: 'open' });
    this.shadowRoot!.appendChild(template.content.cloneNode(true));

    const toolName = this.getAttribute("tool-name") || "";
    const args = this.getAttribute("args") || "";

    this.shadowRoot!.querySelector(".tool-name")!.textContent = `Tool: ${toolName}`;
    this.shadowRoot!.querySelector(".args")!.textContent = `Arguments: ${args}`;

    const approveBtn = this.shadowRoot!.querySelector(".approve")!;
    const rejectBtn = this.shadowRoot!.querySelector(".reject")!;

    approveBtn.addEventListener("click", () => {
      approveBtn.setAttribute("disabled", "true");
      rejectBtn.setAttribute("disabled", "true");
      this.classList.add("approved");
      this.dispatchEvent(new CustomEvent("approve"));
    });

    rejectBtn.addEventListener("click", () => {
      approveBtn.setAttribute("disabled", "true");
      rejectBtn.setAttribute("disabled", "true");
      this.classList.add("rejected");
      this.dispatchEvent(new CustomEvent("reject"));
    });
  }
}
</script>
